<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XIGO - Encuesta Premium</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        xigo: '#2D5A27',
                        'xigo-light': '#f0fdf4',
                    }
                }
            }
        }
    </script>
    <style>
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        body { background-color: #f9fafb; margin: 0; padding: 0; font-family: sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const ADMIN_PASSWORD = "XIGO2026"; 

        const surveyData = [
            {
                section: "Bloque 0 - Filtro",
                title: "¬øEn los √∫ltimos 30 d√≠as, has comprado comida preparada para consumir fuera de casa, trabajo o universidad?",
                options: ["S√≠, lo he comprado", "No, pero lo considerar√≠a si fuera conveniente", "No, no me interesa"],
                type: "single",
                terminateIf: "No, no me interesa"
            },
            {
                section: "Bloque 1 - Contexto",
                title: "¬øCu√°l describe mejor tu situaci√≥n actual?",
                options: ["Trabajo fuera de casa", "Trabajo desde casa / Online", "Trabajo mixto (H√≠brido)", "Estudiante / No trabajo actualmente"],
                type: "single"
            },
            {
                section: "Bloque 1 - Frecuencia",
                title: "¬øCon qu√© frecuencia almuerzas fuera de casa en una semana normal?",
                options: ["0 veces", "1-2 veces", "3-4 veces", "5 o m√°s veces"],
                type: "single"
            },
            {
                section: "Bloque 1 - Experiencia",
                title: "¬øHas comprado alguna vez comida preparada para consumir despu√©s (Refrigerada o Empacada)?",
                options: ["S√≠, regularmente", "S√≠, algunas veces", "No, pero me llama la atenci√≥n", "No, no me interesa"],
                type: "single"
            },
            {
                section: "Bloque 1 - Momentos",
                title: "¬øEn qu√© situaciones elegir√≠as comida lista para llevar? (Elige todas las que apliquen)",
                options: ["Poco tiempo para almorzar", "Reuniones de trabajo o estudio continuo", "No alcanc√© a cocinar en casa", "Comer en la oficina / escritorio", "Entre traslados de un sitio a otro", "Para llevar y comer en casa"],
                type: "multiple"
            },
            {
                section: "Bloque 1 - Preferencias",
                title: "¬øQu√© tipo de comida te genera m√°s apetito en formato Grab & Go? (Elige hasta 3)",
                options: ["Ecuatoriana", "Casera ligera", "Bowls balanceados", "Ensaladas", "Sopas / Cremas", "Snacks salados"],
                type: "multiple",
                max: 3
            },
            {
                section: "Bloque 2 - Precios",
                title: "¬øQu√© precio te parece razonable para un almuerzo fresco y de calidad?",
                options: ["Menos de $5.00", "$5.99 - $7.99", "$7.99 - $9.99", "$9.99 - $11.99", "$12.00 o m√°s"],
                type: "single"
            },
            {
                section: "Bloque 2 - Elasticidad",
                title: "Si un almuerzo de $5.99 sube a $7.99 por mejores ingredientes, ¬øqu√© har√≠as?",
                options: ["Lo seguir√≠a comprando igual", "Lo comprar√≠a con menos frecuencia", "Buscar√≠a otra opci√≥n m√°s barata", "Dejar√≠a de comprarlo definitivamente"],
                type: "single"
            },
            {
                section: "Bloque 3 - Bebidas",
                title: "¬øCu√°l de estas opciones de bebida te resultar√≠a m√°s atractiva? (Elige 2)",
                options: ["Agua natural / saborizada", "Jugo natural prensado", "T√© fr√≠o / Infusi√≥n", "Caf√© latte / Macha", "Bebida funcional (Energ√≠a/Salud)", "Bebida refrescante cl√°sica"],
                type: "multiple",
                max: 2
            },
            {
                section: "Bloque 3 - L√°cteos",
                title: "¬øQu√© tipo de leche prefieres en tus bebidas?",
                options: ["Leche entera / Semidescremada", "Deslactosada", "Almendra", "Avena", "Soya", "No consumo leche"],
                type: "single"
            },
            {
                section: "Bloque 4 - Perfil",
                title: "¬øEn qu√© zona de Guayaquil realizas la mayor√≠a de tus actividades?",
                options: ["Norte", "Centro", "Sur", "Samborond√≥n", "V√≠a a la Costa", "Dur√°n"],
                type: "single"
            },
            {
                section: "Bloque 4 - Perfil",
                title: "Rango de edad",
                options: ["18-24 a√±os", "25-34 a√±os", "35-44 a√±os", "45-54 a√±os", "55 a√±os o m√°s"],
                type: "single"
            }
        ];

        function App() {
            const [step, setStep] = useState('survey');
            const [currentIdx, setCurrentIdx] = useState(0);
            const [answers, setAnswers] = useState({});
            const [selectedInStep, setSelectedInStep] = useState([]);
            const [email, setEmail] = useState("");
            const [isLoading, setIsLoading] = useState(false);
            const [adminClicks, setAdminClicks] = useState(0);

            const handleAdminAccess = () => {
                const clicks = adminClicks + 1;
                if (clicks >= 5) {
                    const p = prompt("Acceso Administrador XIGO:");
                    if (p === ADMIN_PASSWORD) setStep('admin');
                    setAdminClicks(0);
                } else {
                    setAdminClicks(clicks);
                }
            };

            const handleSelect = (val) => {
                const q = surveyData[currentIdx];
                if (q.type === 'single') {
                    const newAnswers = { ...answers, [q.title]: val };
                    setAnswers(newAnswers);
                    setSelectedInStep([val]);
                    if (q.terminateIf && val === q.terminateIf) {
                        setStep('terminated');
                    } else {
                        setTimeout(() => {
                            if (currentIdx < surveyData.length - 1) {
                                setCurrentIdx(currentIdx + 1);
                                setSelectedInStep([]);
                            } else {
                                setStep('email');
                            }
                        }, 400);
                    }
                } else {
                    let updated = selectedInStep.includes(val)
                        ? selectedInStep.filter(i => i !== val)
                        : (q.max && selectedInStep.length >= q.max ? selectedInStep : [...selectedInStep, val]);
                    setSelectedInStep(updated);
                    setAnswers({ ...answers, [q.title]: updated });
                }
            };

            const nextStep = () => {
                if (currentIdx < surveyData.length - 1) {
                    setCurrentIdx(currentIdx + 1);
                    setSelectedInStep([]);
                } else {
                    setStep('email');
                }
            };

            const submitEmail = () => {
                if (!email.includes('@')) return alert("Por favor ingresa un email v√°lido");
                setIsLoading(true);
                setTimeout(() => {
                    setIsLoading(false);
                    setStep('success');
                }, 1200);
            };

            if (step === 'admin') {
                return (
                    <div className="p-8 bg-white min-h-screen">
                        <div className="flex justify-between items-center mb-8 border-b pb-4">
                            <h1 className="text-2xl font-bold text-xigo uppercase tracking-tighter">Panel de Resultados XIGO</h1>
                            <button onClick={() => setStep('survey')} className="bg-gray-100 px-4 py-2 rounded-xl font-bold text-gray-500 hover:bg-gray-200">Cerrar</button>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div className="bg-green-50 p-6 rounded-3xl text-xigo font-bold border border-green-100">
                                <p className="text-xs uppercase opacity-60 mb-1">Estado de la Base de Datos</p>
                                <p className="text-xl">Listo para recibir registros</p>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen flex items-center justify-center p-4">
                    <div className="bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col min-h-[650px] border border-gray-100">
                        
                        <div onClick={handleAdminAccess} className="bg-xigo p-8 text-center cursor-pointer select-none active:scale-[0.99] transition-all">
                            <h1 className="text-white font-black text-3xl tracking-[0.2em] mb-1">XIGO</h1>
                            <p className="text-green-100 text-[10px] uppercase tracking-widest font-bold">Bebiendo y Comiendo ‚Ä¢ Grab & Go</p>
                        </div>

                        <div className="p-8 sm:p-10 flex-grow flex flex-col">
                            {step === 'survey' && (
                                <div className="fade-in flex-grow flex flex-col">
                                    <div className="w-full bg-gray-100 h-1.5 rounded-full mb-8 overflow-hidden">
                                        <div className="bg-xigo h-full transition-all duration-700" style={{ width: `${(currentIdx / surveyData.length) * 100}%` }}></div>
                                    </div>
                                    <p className="text-xigo font-bold text-xs uppercase mb-2 opacity-70 tracking-widest">{surveyData[currentIdx].section}</p>
                                    <h2 className="text-xl sm:text-2xl font-extrabold text-gray-800 leading-tight mb-6">{surveyData[currentIdx].title}</h2>
                                    <div className="space-y-3 flex-grow">
                                        {surveyData[currentIdx].options.map((opt, i) => (
                                            <button 
                                                key={i} 
                                                onClick={() => handleSelect(opt)}
                                                className={`w-full p-4 rounded-2xl text-left font-bold transition-all border-2 
                                                    ${selectedInStep.includes(opt) ? 'border-xigo bg-xigo-light text-xigo shadow-sm' : 'border-gray-50 bg-white text-gray-600 hover:border-gray-200'}`}
                                            >
                                                {opt}
                                            </button>
                                        ))}
                                    </div>
                                    {surveyData[currentIdx].type === 'multiple' && selectedInStep.length > 0 && (
                                        <button onClick={nextStep} className="mt-8 w-full bg-xigo text-white font-black py-4 rounded-2xl shadow-xl uppercase tracking-widest hover:brightness-110 active:scale-[0.98] transition-all">
                                            Continuar
                                        </button>
                                    )}
                                    <p className="text-center text-[10px] text-gray-300 mt-6 font-bold uppercase tracking-widest">Pregunta {currentIdx + 1} de {surveyData.length}</p>
                                </div>
                            )}

                            {step === 'email' && (
                                <div className="fade-in text-center py-6 flex-grow flex flex-col justify-center">
                                    <div className="text-5xl mb-6">üéÅ</div>
                                    <h2 className="text-2xl font-black text-gray-800 mb-4 uppercase italic">¬°CASI LISTO!</h2>
                                    <p className="text-gray-500 text-sm mb-8 leading-relaxed px-4 italic font-medium">D√©janos tu correo para enviarte el c√≥digo de descuento del <strong>15%</strong> para nuestra apertura.</p>
                                    <input 
                                        type="email" value={email} onChange={(e) => setEmail(e.target.value)} placeholder="tu@correo.com"
                                        className="w-full p-5 rounded-2xl border-2 border-gray-100 focus:border-xigo outline-none mb-4 text-center font-bold text-gray-700 placeholder:text-gray-300 shadow-inner"
                                    />
                                    <button onClick={submitEmail} disabled={isLoading} className="w-full bg-xigo text-white font-black py-5 rounded-2xl shadow-xl uppercase tracking-widest disabled:opacity-50 active:scale-[0.98] transition-all">
                                        {isLoading ? "PROCESANDO..." : "Obtener mi Regalo"}
                                    </button>
                                </div>
                            )}

                            {step === 'success' && (
                                <div className="fade-in text-center py-10 flex-grow flex flex-col justify-center">
                                    <div className="w-20 h-20 bg-green-100 text-xigo rounded-full flex items-center justify-center text-4xl mx-auto mb-6 shadow-inner">‚úì</div>
                                    <h2 onClick={handleAdminAccess} className="text-3xl font-black text-xigo mb-4 uppercase italic cursor-pointer">¬°HECHO!</h2>
                                    <p className="text-gray-600 mb-8 font-medium italic px-2">Hemos registrado tus respuestas. El c√≥digo <strong>XIGO15</strong> llegar√° pronto a tu correo.</p>
                                    <div className="bg-gray-50 border-2 border-dashed border-gray-200 p-8 rounded-[2.5rem] text-gray-400 text-[10px] uppercase font-black tracking-[0.2em]">
                                        REVISA TU BANDEJA DE ENTRADA
                                    </div>
                                </div>
                            )}

                            {step === 'terminated' && (
                                <div className="fade-in text-center py-10 flex-grow flex flex-col justify-center">
                                    <h2 className="text-2xl font-black text-gray-800 mb-4 uppercase italic">¬°Gracias!</h2>
                                    <p className="text-gray-500 text-sm mb-10 leading-relaxed italic font-medium">Apreciamos tu honestidad. Aunque no califiques para el cup√≥n hoy, tus respuestas nos ayudan a mejorar.</p>
                                    <button onClick={() => window.location.reload()} className="text-xigo font-bold underline decoration-2 underline-offset-4">Volver al inicio</button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
